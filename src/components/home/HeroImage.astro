---
import Button from "../common/Button.astro";
import Section from "../common/Section.astro";
import TextBlock from "../common/TextBlock.astro";
import { Image } from 'astro:assets';


import heroImage from '/public/assets/img/senior_couple_walking_autumn.webp';

const { subtitle, title, description, buttonText } = Astro.props;
---

<Section
  padding="large"
  width="full"
  height="auto"
  id="experience-section"
  animation="parallax"
  class="relative overflow-hidden"
>
  <div class="absolute inset-0 w-full h-full parallax-container">
    <Image
      
      src={heroImage}
      alt="Senior couple in the park"
      width={1920}
      height={1080}
     class="object-cover w-full h-full parallax-image"
      loading="eager"
    />
  </div>
  <div
    class="relative z-10 text-center lg:text-left py-16 sm:py-24 lg:py-48 flex flex-col lg:flex-row lg:items-center"
  >
    <div class="lg:w-1/2 w-full px-4">
      <TextBlock
        subtitle={subtitle}
        title={title}
        description={description}
        alignment="left"
        textColor="text-deep-blue"
      />
      
      <div
        class="flex flex-col space-y-4 sm:flex-row sm:justify-center lg:justify-start sm:space-y-0"
      >
        <Button variant="primary" size="medium" class="mx-auto sm:mx-0 lg:ml-8">
          {buttonText}
        </Button>
      </div>
    </div>
    <!-- Parte derecha vacÃ­a para pantallas grandes -->
    <div class="hidden lg:block lg:w-1/2"></div>
  </div>
</Section>

<style>
  /* Carga progresiva */
  .hero-image {
    transition: opacity 0.3s ease-in-out;
  }
  
</style>

<script>
  // Script para manejar la carga progresiva
  document.addEventListener('astro:page-load', () => {
    const heroImage = document.querySelector('.hero-image') as HTMLImageElement;
    if (heroImage) {
      heroImage.style.opacity = '0';
      heroImage.onload = () => {
        heroImage.style.opacity = '1';
      };
    }
  });
</script>